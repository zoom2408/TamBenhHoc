<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Các tiếp cận Tâm bệnh học (USSH) – Interactive</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{--brand:#2563eb;}
    @media print{
      @page{size:A4;margin:14mm 14mm 16mm;}
      .no-print{display:none!important}
      .print\:block{display:block!important}
      .print\:mt-0{margin-top:0!important}
      .section{page-break-inside:avoid}
      .card{break-inside:avoid}
    }
    .prose p{margin:0.3rem 0}
    .chip{border:1px solid rgba(37,99,235,.25);color:#1e40af;background:rgba(37,99,235,.06)}
    .kbd{border:1px solid #cbd5e1;border-bottom-width:2px;border-right-width:2px;border-radius:.375rem;padding:.1rem .35rem;font:600 12px ui-monospace,monospace}
    .table-g{border-collapse:separate;border-spacing:0}
    .table-g th,.table-g td{border:1px solid #e5e7eb;padding:.6rem .7rem;vertical-align:top}
    .table-g th{background:#f1f5f9;font-weight:700}
    .table-g tr:nth-child(even) td{background:#f8fafc}
    .pill{display:inline-flex;align-items:center;gap:.4rem;padding:.25rem .55rem;border-radius:999px;background:rgba(37,99,235,.08);color:#1e40af;font-weight:600;font-size:.8rem}
    .shadow-soft{box-shadow:0 10px 25px rgba(2,6,23,.08),0 2px 6px rgba(2,6,23,.06)}
    html{scroll-behavior:smooth}
  .section{scroll-margin-top:140px}
  .nav-link.active{outline:2px solid rgba(37,99,235,.25);background:#eff6ff;color:#1d4ed8}
  @media print{.section{display:block!important}}
  </style>
</head>
<body class="bg-slate-50 text-slate-800 selection:bg-blue-200/70">
  <!-- Header -->
  <header class="no-print border-b border-slate-200 bg-white/80 backdrop-blur sticky top-0 z-40">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-3">
      <div class="h-9 w-9 grid place-items-center rounded-xl bg-blue-600 text-white font-bold">TBH</div>
      <div class="flex-1">
        <h1 class="text-lg sm:text-xl font-bold text-slate-900">Các tiếp cận Tâm bệnh học (USSH) – Tóm tắt tương tác</h1>
        <p class="text-slate-500 text-sm">Blue theme • Tailwind • Có bài test & nút in PDF</p>
      </div>
      <div class="flex gap-2">
        <button id="printBtn" class="no-print inline-flex items-center gap-2 rounded-xl bg-blue-600 px-3.5 py-2 text-white font-semibold hover:bg-blue-700 transition shadow-soft" title="In ra PDF (⌘/Ctrl + P)">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M6 7V3h12v4h2a2 2 0 0 1 2 2v6h-4v4H6v-4H2V9a2 2 0 0 1 2-2h2zm2-2h8v2H8V5zm8 14v-4H8v4h8zm-1-9h2v2h-2v-2z"/></svg>
          In ra PDF
        </button>
      </div>
    </div>
  </header>

  <!-- Quick Nav -->
  <nav class="no-print sticky top-[60px] z-30 bg-white/80 backdrop-blur border-y border-slate-200">
    <div class="max-w-6xl mx-auto px-4 py-2 flex flex-wrap items-center gap-2">
      <a href="#approaches" data-target="approaches" class="nav-link px-3 py-2 rounded-lg text-sm font-semibold bg-blue-50 text-blue-700 hover:bg-blue-100">Thẻ tiếp cận</a>
      <a href="#comparisons" data-target="comparisons" class="nav-link px-3 py-2 rounded-lg text-sm font-semibold bg-slate-50 text-slate-700 hover:bg-slate-100">Bảng so sánh</a>
      <a href="#cbt" data-target="cbt" class="nav-link px-3 py-2 rounded-lg text-sm font-semibold bg-slate-50 text-slate-700 hover:bg-slate-100">CBT & lược đồ</a>
      <a href="#quiz" data-target="quiz" class="nav-link px-3 py-2 rounded-lg text-sm font-semibold bg-slate-50 text-slate-700 hover:bg-slate-100">Bài test</a>
      <span class="ml-auto flex items-center gap-2 text-xs sm:text-sm">
        <button id="modeTabs" class="px-3 py-1.5 rounded-lg font-semibold text-slate-700 border border-slate-200 hover:bg-slate-50">Tabs</button>
        <button id="modeScroll" class="px-3 py-1.5 rounded-lg font-semibold text-slate-700 border border-slate-200 hover:bg-slate-50">Cuộn</button>
      </span>
    </div>
  </nav>

  <!-- Thẻ tiếp cận -->
  <section id="approaches" class="section max-w-6xl mx-auto px-4 py-8">
    <div class="mb-5">
      <h3 class="text-xl font-bold text-slate-900">1) Thẻ nội dung – Các tiếp cận chính</h3>
      <p class="text-slate-600">Bấm vào từng thẻ để bung nội dung.</p>
    </div>
    <div class="grid md:grid-cols-2 gap-4">
      <!-- Sinh học -->
      <details class="group card bg-white rounded-2xl border border-slate-200 shadow-soft open:shadow-md">
        <summary class="cursor-pointer list-none p-4 flex items-start justify-between">
          <div>
            <h4 class="text-lg font-semibold text-slate-900">Tiếp cận <span class="text-blue-700">Sinh học</span></h4>
            <p class="text-sm text-slate-600">Não bộ, nội tiết, di truyền; chất dẫn truyền thần kinh; hoá dược liệu pháp.</p>
          </div>
          <svg class="h-5 w-5 text-slate-400 group-open:rotate-180 transition-transform" viewBox="0 0 20 20" fill="currentColor"><path d="M5.23 7.21a.75.75 0 011.06.02L10 11.06l3.71-3.83a.75.75 0 111.08 1.04l-4.25 4.38a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z"/></svg>
        </summary>
        <div class="px-4 pb-4 prose">
          <ul class="list-disc pl-5">
            <li><b>Trọng tâm:</b> Não điều khiển hành vi; vai trò <i>hệ nội tiết</i>, <i>di truyền/biểu sinh</i>.</li>
            <li><b>Neurotransmitters tiêu biểu:</b> khí sắc ↔ <i>serotonin & norepinephrine</i>; loạn thần/Parkinson/ADHD ↔ <i>dopamine</i>; lo âu ↔ <i>norepinephrine & GABA</i>.</li>
            <li><b>Trị liệu sinh học:</b> hoá dược (tăng/giảm hoạt tính hoặc tái hấp thu), các can thiệp sinh học khác.</li>
          </ul>
        </div>
      </details>

      <!-- Phân tâm/Tâm động -->
      <details class="group card bg-white rounded-2xl border border-slate-200 shadow-soft">
        <summary class="cursor-pointer list-none p-4 flex items-start justify-between">
          <div>
            <h4 class="text-lg font-semibold text-slate-900">Tiếp cận <span class="text-blue-700">Phân tâm – Tâm động</span></h4>
            <p class="text-sm text-slate-600">Vô thức, xung năng, gắn bó; củng cố cái tôi; liên tưởng tự do, chuyển cảm…</p>
          </div>
          <svg class="h-5 w-5 text-slate-400 group-open:rotate-180 transition-transform" viewBox="0 0 20 20" fill="currentColor"><path d="M5.23 7.21a.75.75 0 011.06.02L10 11.06l3.71-3.83a.75.75 0 111.08 1.04l-4.25 4.38a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z"/></svg>
        </summary>
        <div class="px-4 pb-4 prose">
          <ul class="list-disc pl-5">
            <li><b>Mục tiêu:</b> giải quyết xung đột vô thức; tăng sức mạnh cái <i>Tôi</i>.</li>
            <li><b>Kỹ thuật:</b> liên tưởng tự do, phân tích giấc mơ, diễn dịch, làm việc với <i>chuyển cảm</i>.</li>
          </ul>
        </div>
      </details>

      <!-- Hành vi -->
      <details class="group card bg-white rounded-2xl border border-slate-200 shadow-soft">
        <summary class="cursor-pointer list-none p-4 flex items-start justify-between">
          <div>
            <h4 class="text-lg font-semibold text-slate-900">Tiếp cận <span class="text-blue-700">Hành vi</span></h4>
            <p class="text-sm text-slate-600">Điều kiện hoá cổ điển (Pavlov, “Albert bé bỏng”), thao tác, học tập xã hội.</p>
          </div>
          <svg class="h-5 w-5 text-slate-400 group-open:rotate-180 transition-transform" viewBox="0 0 20 20" fill="currentColor"><path d="M5.23 7.21a.75.75 0 011.06.02L10 11.06l3.71-3.83a.75.75 0 111.08 1.04l-4.25 4.38a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z"/></svg>
        </summary>
        <div class="px-4 pb-4 prose">
          <ul class="list-disc pl-5">
            <li><b>5 nguyên lý ĐKHCĐ:</b> tiếp nhận, dập tắt, phục hồi tự phát, khái quát hoá, phân biệt kích thích.</li>
            <li><b>Ứng dụng:</b> phơi nhiễm/giải mẫn cảm, huấn luyện kỹ năng, dập tắt né tránh.</li>
          </ul>
        </div>
      </details>

      <!-- Nhận thức/CBT -->
      <details class="group card bg-white rounded-2xl border border-slate-200 shadow-soft">
        <summary class="cursor-pointer list-none p-4 flex items-start justify-between">
          <div>
            <h4 class="text-lg font-semibold text-slate-900">Tiếp cận <span class="text-blue-700">Nhận thức (CBT)</span></h4>
            <p class="text-sm text-slate-600">Lệch lạc nhận thức, giản đồ, tái cấu trúc nhận thức + can thiệp hành vi.</p>
          </div>
          <svg class="h-5 w-5 text-slate-400 group-open:rotate-180 transition-transform" viewBox="0 0 20 20" fill="currentColor"><path d="M5.23 7.21a.75.75 0 011.06.02L10 11.06l3.71-3.83a.75.75 0 111.08 1.04l-4.25 4.38a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z"/></svg>
        </summary>
        <div class="px-4 pb-4 prose">
          <ul class="list-disc pl-5">
            <li><b>CBT là “cây dù”</b> tích hợp nhận thức–hành vi; chú trọng thử nghiệm hành vi, tái cấu trúc, loại bỏ hành vi an toàn.</li>
          </ul>
        </div>
      </details>

      <!-- Nhân văn – Hiện sinh -->
      <details class="group card bg-white rounded-2xl border border-slate-200 shadow-soft">
        <summary class="cursor-pointer list-none p-4 flex items-start justify-between">
          <div>
            <h4 class="text-lg font-semibold text-slate-900">Tiếp cận <span class="text-blue-700">Nhân văn – Hiện sinh</span></h4>
            <p class="text-sm text-slate-600">Quan hệ trị liệu thuận lợi, tự hiện thực hoá; 4 cặp đối lập hiện sinh.</p>
          </div>
          <svg class="h-5 w-5 text-slate-400 group-open:rotate-180 transition-transform" viewBox="0 0 20 20" fill="currentColor"><path d="M5.23 7.21a.75.75 0 011.06.02L10 11.06l3.71-3.83a.75.75 0 111.08 1.04l-4.25 4.38a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z"/></svg>
        </summary>
        <div class="px-4 pb-4 prose">
          <ul class="list-disc pl-5">
            <li><b>Mục tiêu:</b> thiết lập quan hệ tích cực, giúp TC tự quyết, tìm ý nghĩa.</li>
            <li><b>4 trụ cột:</b> Sống–Cái chết; Tự do–Trách nhiệm; Hư vô–Ý nghĩa; Cô đơn–Kết nối.</li>
          </ul>
        </div>
      </details>

      <!-- Văn hoá – Xã hội -->
      <details class="group card bg-white rounded-2xl border border-slate-200 shadow-soft">
        <summary class="cursor-pointer list-none p-4 flex items-start justify-between">
          <div>
            <h4 class="text-lg font-semibold text-slate-900">Tiếp cận <span class="text-blue-700">Văn hoá – Xã hội</span></h4>
            <p class="text-sm text-slate-600">Hệ thống gia đình; nữ quyền; tham vấn khẳng định LGBTIQ+; liệu pháp trần thuật.</p>
          </div>
          <svg class="h-5 w-5 text-slate-400 group-open:rotate-180 transition-transform" viewBox="0 0 20 20" fill="currentColor"><path d="M5.23 7.21a.75.75 0 011.06.02L10 11.06l3.71-3.83a.75.75 0 111.08 1.04l-4.25 4.38a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z"/></svg>
        </summary>
        <div class="px-4 pb-4 prose">
          <ul class="list-disc pl-5">
            <li><b>Quan điểm:</b> cá tính hình thành trong khuôn khổ xã hội; điều kiện kinh tế–chính trị ảnh hưởng sâu sắc SKTT.</li>
            <li><b>Ví dụ nghiên cứu:</b> liên hệ bình đẳng giới quốc gia và khác biệt độ dày vỏ não giữa giới.</li>
          </ul>
        </div>
      </details>
    </div>
  </section>

  <!-- Bảng so sánh -->
  <section id="comparisons" class="section max-w-6xl mx-auto px-4 py-8">
    <h3 class="text-xl font-bold text-slate-900 mb-4">2) Bảng so sánh nhanh</h3>

    <!-- Hiện đại vs Hậu hiện đại -->
    <div class="bg-white rounded-2xl p-4 border border-slate-200 shadow-soft mb-6">
      <h4 class="text-lg font-semibold text-blue-700 mb-2">Hiện đại ↔ Hậu hiện đại</h4>
      <div class="overflow-x-auto">
        <table class="table-g w-full text-sm">
          <thead>
            <tr>
              <th>Khía cạnh</th>
              <th>Hiện đại</th>
              <th>Hậu hiện đại</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Thực tại</td>
              <td>Khách quan, tồn tại độc lập</td>
              <td>Được kiến tạo bởi diễn ngôn, quyền lực</td>
            </tr>
            <tr>
              <td>Phương pháp</td>
              <td>Định lượng, quy luật phổ quát (đại tự sự)</td>
              <td>Định tính, nhấn mạnh cá nhân/đa nguyên (vi tự sự)</td>
            </tr>
            <tr>
              <td>Hàm ý lâm sàng</td>
              <td>Chẩn đoán – phân loại – điều trị theo tiêu chuẩn</td>
              <td>Phản biện nhãn dán, chú trọng ngôn ngữ – bối cảnh – quyền lực</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Bệnh lý hoá vs Phi/Giải bệnh lý hoá -->
    <div class="bg-white rounded-2xl p-4 border border-slate-200 shadow-soft mb-6">
      <h4 class="text-lg font-semibold text-blue-700 mb-2">Nhãn quan: Bệnh lý hoá – Phi bệnh lý hoá – Giải bệnh lý hoá</h4>
      <div class="overflow-x-auto">
        <table class="table-g w-full text-sm">
          <thead>
            <tr>
              <th>Đề mục</th>
              <th>Bệnh lý hoá</th>
              <th>Phi bệnh lý hoá</th>
              <th>Giải bệnh lý hoá</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Quan điểm</td>
              <td>SKTT là rối loạn; cần tiêu chí Y khoa</td>
              <td>SKTT là một phần đời sống; thận trọng dán nhãn</td>
              <td>Chất vấn định nghĩa & quyền lực tạo–duy trì nhãn</td>
            </tr>
            <tr>
              <td>Tương quan trị liệu</td>
              <td>Chuyên gia–bệnh nhân (quyền lực bất cân xứng)</td>
              <td colspan="2">Hướng tới cân bằng: người đồng hành – thân chủ (hai chủ thể)</td>
            </tr>
            <tr>
              <td>Ứng dụng</td>
              <td>DSM/ICD, can thiệp chuẩn hoá</td>
              <td>Trọng trải nghiệm chủ quan</td>
              <td>Nữ quyền, trần thuật, khẳng định đa dạng thần kinh…</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Bảng “Tiếp cận – Từ khoá – Công cụ” -->
    <div class="bg-white rounded-2xl p-4 border border-slate-200 shadow-soft">
      <h4 class="text-lg font-semibold text-blue-700 mb-2">Bảng gợi ý: Tiếp cận – Từ khoá – Công cụ trị liệu</h4>
      <div class="overflow-x-auto">
        <table class="table-g w-full text-sm">
          <thead>
            <tr>
              <th>Tiếp cận</th>
              <th>Từ khoá lõi</th>
              <th>Ví dụ can thiệp</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Sinh học</td>
              <td>Não, nội tiết, di truyền, chất dẫn truyền</td>
              <td>Thuốc điều chỉnh 5-HT/NE/DA/GABA; can thiệp sinh học</td>
            </tr>
            <tr>
              <td>Phân tâm – Tâm động</td>
              <td>Vô thức, xung năng, gắn bó, cơ chế phòng vệ</td>
              <td>Liên tưởng tự do, phân tích giấc mơ, làm việc với chuyển cảm</td>
            </tr>
            <tr>
              <td>Hành vi</td>
              <td>ĐKHCĐ, thao tác, học tập xã hội, dập tắt</td>
              <td>Phơi nhiễm/giải mẫn cảm, huấn luyện kỹ năng</td>
            </tr>
            <tr>
              <td>Nhận thức/CBT</td>
              <td>Giản đồ, tự động âm, tái cấu trúc, hành vi an toàn</td>
              <td>CBT theo mô hình nhận thức–hành vi</td>
            </tr>
            <tr>
              <td>Nhân văn – Hiện sinh</td>
              <td>Liên minh trị liệu, tự hiện thực hoá, ý nghĩa</td>
              <td>Liệu pháp lấy TC làm trung tâm, trị liệu hiện sinh</td>
            </tr>
            <tr>
              <td>Văn hoá – Xã hội</td>
              <td>Hệ thống, diễn ngôn, quyền lực, giai tầng, giới</td>
              <td>Hệ thống gia đình, nữ quyền, khẳng định LGBTIQ+, trần thuật</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- CBT & Lược đồ -->
  <section id="cbt" class="section max-w-6xl mx-auto px-4 py-8">
    <h3 class="text-xl font-bold text-slate-900 mb-4">3) Lược đồ Nhận thức – Hành vi (CBT)</h3>
    <div class="bg-white rounded-2xl p-4 border border-slate-200 shadow-soft">
      <div class="grid md:grid-cols-5 gap-3 items-stretch">
        <div class="md:col-span-1 border border-blue-100 bg-blue-50 rounded-xl p-3">
          <h5 class="font-semibold text-blue-800">Tình huống</h5>
          <p class="text-sm text-slate-700">Kích hoạt (ngoại cảnh/nội cảm)</p>
        </div>
        <div class="md:col-span-1 border rounded-xl p-3">
          <h5 class="font-semibold">Tự động âm</h5>
          <p class="text-sm">Nghĩ méo mó, niềm tin cốt lõi</p>
        </div>
        <div class="md:col-span-1 border rounded-xl p-3">
          <h5 class="font-semibold">Cảm xúc</h5>
          <p class="text-sm">Buồn/lo/tức… mức SUDs</p>
        </div>
        <div class="md:col-span-1 border rounded-xl p-3">
          <h5 class="font-semibold">Hành vi</h5>
          <p class="text-sm">Né tránh/ritual/hành vi an toàn</p>
        </div>
        <div class="md:col-span-1 border rounded-xl p-3">
          <h5 class="font-semibold">Thử nghiệm</h5>
          <p class="text-sm">Tái cấu trúc, tiếp xúc, kỹ năng</p>
        </div>
      </div>
      <p class="text-xs text-slate-500 mt-2">Gợi ý thực hành: xác định suy nghĩ tự động → thách thức bằng chứng → lập hành vi thử nghiệm nhỏ, giảm dần an toàn giả.</p>
    </div>
  </section>

  <!-- Quiz -->
  <section id="quiz" class="section max-w-6xl mx-auto px-4 py-8">
    <h3 class="text-xl font-bold text-slate-900 mb-3">4) Bài kiểm tra nhanh</h3>
    <p class="text-slate-600 mb-4">Chọn đáp án đúng nhất. Bấm <b>Nộp bài</b> để xem điểm & giải thích. Bấm <b>Làm lại</b> để xáo câu.</p>

    <div id="quizBox" class="space-y-4"></div>

    <div class="mt-4 flex items-center gap-3">
      <button id="submitBtn" class="inline-flex items-center gap-2 rounded-xl bg-blue-600 px-4 py-2 text-white font-semibold hover:bg-blue-700 transition shadow-soft">
        Nộp bài
      </button>
      <button id="resetBtn" class="inline-flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-blue-700 font-semibold border border-blue-200 hover:bg-blue-50 transition">Làm lại</button>
      <span id="score" class="font-semibold text-slate-700"></span>
    </div>
  </section>

  <!-- Footer note for print -->
  <footer class="print:block hidden text-xs text-slate-500 max-w-6xl mx-auto px-4 pb-8">
    Tài liệu tóm lược học tập nội bộ – Môn Tâm bệnh học (USSH). Tự in phục vụ học tập cá nhân.
  </footer>

  <script>
    // Print handler
    document.getElementById('printBtn').addEventListener('click',()=>window.print());

    // Quiz data (12 câu)
    const Q = [
      {
        s: 'Quan điểm nào nhấn mạnh não bộ, hệ nội tiết và di truyền/biểu sinh trong giải thích rối loạn?',
        a: ['Phân tâm – Tâm động','Sinh học','Nhân văn – Hiện sinh','Văn hoá – Xã hội'],
        c: 1,
        r: 'Tiếp cận sinh học: não, nội tiết, di truyền; biến đổi dẫn truyền thần kinh.'
      },
      {
        s: 'Cặp chất dẫn truyền gắn với rối loạn khí sắc thường được nhắc đến là?',
        a: ['Dopamine & GABA','Serotonin & Norepinephrine','Acetylcholine & Glutamate','Histamine & GABA'],
        c: 1,
        r: 'Khí sắc ↔ serotonin & norepinephrine; lo âu ↔ NE & GABA; loạn thần ↔ dopamine.'
      },
      {
        s: 'Mục tiêu cốt lõi của trị liệu phân tâm – tâm động là?',
        a: ['Tăng dopamine thể vân','Giải quyết xung đột vô thức, củng cố cái “Tôi”','Giảm cortisol bằng thiền định','Tăng giao tiếp không bạo lực'],
        c: 1,
        r: 'Phân tâm/tâm động hướng tới vô thức và sức mạnh bản ngã; kỹ thuật như liên tưởng tự do, chuyển cảm.'
      },
      {
        s: 'Trong hành vi học, thí nghiệm nào kinh điển về điều kiện hoá nỗi sợ?',
        a: ['Skinner – Hộp mèo','Watson – “Albert bé bỏng”','Bandura – Búp bê Bobo','Ebbinghaus – Đường cong quên'],
        c: 1,
        r: '“Albert bé bỏng” minh hoạ điều kiện hoá cổ điển nỗi sợ.'
      },
      {
        s: 'Không thuộc 5 nguyên lý điều kiện hoá cổ điển:',
        a: ['Tiếp nhận (acquisition)','Phân biệt kích thích','Phục hồi tự phát','Tăng cường dương (positive reinforcement)'],
        c: 3,
        r: 'Tăng cường dương là khái niệm của điều kiện hoá thao tác, không phải 5 nguyên lý ĐKHCĐ.'
      },
      {
        s: 'CBT kết hợp những thành phần nào?',
        a: ['Chỉ tái cấu trúc nhận thức','Chỉ phơi nhiễm','Nhận thức + hành vi (tái cấu trúc, thử nghiệm hành vi, giảm an toàn giả)','Chỉ phân tích giấc mơ'],
        c: 2,
        r: 'CBT là “cây dù” tích hợp nhận thức–hành vi.'
      },
      {
        s: 'Trụ cột KHÔNG thuộc trị liệu hiện sinh:',
        a: ['Sống–Cái chết','Tự do–Trách nhiệm','Thưởng–Phạt','Hư vô–Ý nghĩa'],
        c: 2,
        r: '4 cặp: Sống–Cái chết; Tự do–Trách nhiệm; Hư vô–Ý nghĩa; Cô đơn–Kết nối.'
      },
      {
        s: 'Tiếp cận văn hoá – xã hội nhấn mạnh điều gì?',
        a: ['Hành vi do phản xạ đơn thuần','Cá tính phát triển trong ràng buộc xã hội; các điều kiện KTXH ảnh hưởng SKTT','Chỉ cấu trúc não bộ quyết định','Chỉ do gen'],
        c: 1,
        r: 'Quan điểm VH–XH: gắn hệ thống, giai tầng, giới, tổ chức xã hội với SKTT; gồm trị liệu hệ thống gia đình, nữ quyền, trần thuật…'
      },
      {
        s: 'Ví dụ can thiệp thuộc tiếp cận văn hoá – xã hội:',
        a: ['Liệu pháp hệ thống gia đình, tham vấn khẳng định LGBTIQ+','ECT','rTMS','Liệu pháp ánh sáng'],
        c: 0,
        r: 'Các liệu pháp tiêu biểu: hệ thống gia đình, cặp đôi, nữ quyền, trần thuật, khẳng định LGBTIQ+.'
      },
      {
        s: 'Cặp mô tả đúng về Hiện đại ↔ Hậu hiện đại:',
        a: ['Khách quan ↔ Kiến tạo bởi diễn ngôn; định lượng ↔ định tính; đại tự sự ↔ vi tự sự','Chủ quan ↔ Khách quan; định tính ↔ định lượng','Sinh học ↔ Tâm xã hội','Lượng hoá ↔ Không đo được'],
        c: 0,
        r: 'Bảng so sánh: Hiện đại – khách quan, phổ quát, định lượng; Hậu hiện đại – kiến tạo, đa nguyên, định tính.'
      },
      {
        s: 'Phát biểu đúng về nhãn quan “bệnh lý hoá – phi/giải bệnh lý hoá”:',
        a: ['Chỉ nên dùng mô hình bệnh để giải thích tất cả','Cần cân bằng quyền lực trong trị liệu, xem xét trải nghiệm chủ quan & diễn ngôn xã hội','Luôn phủ nhận chẩn đoán','Chỉ có ý nghĩa trong nội khoa'],
        c: 1,
        r: 'Phi/Giải bệnh lý hoá nhấn mạnh chủ thể–chủ thể, phản biện quyền lực nhãn dán.'
      },
      {
        s: 'Ví dụ ghép đúng tiếp cận – công cụ:',
        a: ['Hành vi – ECT','Phân tâm – Liên tưởng tự do/Chuyển cảm','Sinh học – Phơi nhiễm','Hiện sinh – Thuốc chống loạn thần'],
        c: 1,
        r: 'Phân tâm dùng liên tưởng tự do, làm việc với chuyển cảm; sinh học dùng hoá dược; hành vi dùng phơi nhiễm.'
      }
    ];

    let order = [];
    const box = document.getElementById('quizBox');
    function shuffle(arr){return arr.sort(()=>Math.random()-0.5)}
    function render(){
      order = shuffle([...Array(Q.length).keys()]);
      box.innerHTML = '';
      order.forEach((qi, idx)=>{
        const q = Q[qi];
        const card = document.createElement('div');
        card.className = 'card bg-white rounded-2xl border border-slate-200 p-4 shadow-soft';
        card.innerHTML = `
          <div class="font-semibold text-slate-900">Câu ${idx+1}. ${q.s}</div>
          <div class="mt-2 grid sm:grid-cols-2 gap-2">
            ${q.a.map((opt,i)=>`
              <label class="flex items-start gap-2 border rounded-lg p-2 hover:bg-slate-50 cursor-pointer">
                <input type="radio" name="q${idx}" value="${i}" class="mt-1">
                <span>${String.fromCharCode(65+i)}. ${opt}</span>
              </label>
            `).join('')}
          </div>
          <div class="mt-2 hidden text-sm text-slate-700" id="explain-${idx}"><b>Giải thích:</b> ${q.r}</div>
        `;
        box.appendChild(card);
      })
      document.getElementById('score').textContent='';
    }

    function grade(){
      let correct=0;
      order.forEach((qi, idx)=>{
        const q = Q[qi];
        const chosen = document.querySelector(`input[name=q${idx}]:checked`);
        const exp = document.getElementById(`explain-${idx}`);
        exp.classList.remove('hidden');
        const labels = box.querySelectorAll(`input[name=q${idx}]`);
        labels.forEach((inp,i)=>{
          const parent = inp.closest('label');
          parent.classList.remove('bg-green-50','bg-red-50','border-green-300','border-red-300');
          if(i===q.c){ parent.classList.add('bg-green-50','border-green-300'); }
          if(chosen && Number(chosen.value)!==q.c && i===Number(chosen.value)){
            parent.classList.add('bg-red-50','border-red-300');
          }
        });
        if(chosen && Number(chosen.value)===q.c) correct++;
      })
      document.getElementById('score').textContent = `Điểm: ${correct}/${Q.length}`;
      window.scrollTo({top:document.getElementById('score').offsetTop-80,behavior:'smooth'});
    }

    document.getElementById('submitBtn').addEventListener('click', grade);
    document.getElementById('resetBtn').addEventListener('click', render);

    render();

    // ===== Tabs & Smooth-Nav Fix =====
    const navLinks = document.querySelectorAll('.nav-link');
    const sectionsMap = {
      approaches: document.getElementById('approaches'),
      comparisons: document.getElementById('comparisons'),
      cbt: document.getElementById('cbt'),
      quiz: document.getElementById('quiz')
    };
    const btnTabs = document.getElementById('modeTabs');
    const btnScroll = document.getElementById('modeScroll');
    let mode = 'tabs';

    function setActiveLink(id){
      navLinks.forEach(a=>{
        a.classList.remove('active','bg-blue-50','text-blue-700');
        a.classList.add('bg-slate-50','text-slate-700');
        if(a.dataset.target===id){
          a.classList.add('active','bg-blue-50','text-blue-700');
          a.classList.remove('bg-slate-50','text-slate-700');
        }
      })
    }
    function showSection(id){
      Object.values(sectionsMap).forEach(sec=>sec.classList.add('hidden'));
      if(sectionsMap[id]) sectionsMap[id].classList.remove('hidden');
    }
    function setMode(newMode){
      mode = newMode;
      if(mode==='tabs'){
        // --- FIX ---
        // When switching from scroll to tabs, we now check which link was active
        // from the IntersectionObserver. This makes the transition smoother
        // by keeping the user on the section they were viewing.
        const activeLink = document.querySelector('.nav-link.active');
        const id = activeLink?.dataset.target || (location.hash||'').slice(1) || navLinks[0]?.dataset.target || 'approaches';
        showSection(id); setActiveLink(id);
      }else{
        Object.values(sectionsMap).forEach(sec=>sec.classList.remove('hidden'));
      }
      btnTabs.classList.toggle('bg-blue-600', mode==='tabs');
      btnTabs.classList.toggle('text-white', mode==='tabs');
      btnScroll.classList.toggle('bg-blue-600', mode==='scroll');
      btnScroll.classList.toggle('text-white', mode==='scroll');
    }

    navLinks.forEach(a=>{
      a.addEventListener('click', (e)=>{
        const id = a.dataset.target;
        if(mode==='tabs'){
          e.preventDefault();
          showSection(id); setActiveLink(id);
          history.replaceState(null,'',`#${id}`);
        } else {
          setActiveLink(id);
          // smooth scroll to anchor (already enabled via CSS)
        }
      });
    });

    // Auto-highlight in scroll mode
    if('IntersectionObserver' in window){
      const io = new IntersectionObserver((entries)=>{
        if(mode!=='scroll') return;
        // Find the entry that is most visible in the viewport
        const visibleEntry = entries.find(e => e.isIntersecting);
        if (visibleEntry) {
            setActiveLink(visibleEntry.target.id);
        }
      }, {rootMargin:'-50% 0px -50% 0px', threshold:0.01});
      Object.values(sectionsMap).forEach(sec=> io.observe(sec));
    }

    // Switch buttons
    btnTabs.addEventListener('click', ()=> setMode('tabs'));
    btnScroll.addEventListener('click', ()=> setMode('scroll'));

    // Ensure all visible for print
    window.addEventListener('beforeprint', ()=>{
      Object.values(sectionsMap).forEach(sec=>sec.classList.remove('hidden'));
    });

    // Init: default Tabs mode
    setMode('tabs');

  </script>
</body>
</html>
